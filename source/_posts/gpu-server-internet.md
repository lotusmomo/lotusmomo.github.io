---
title: GPU服务器联网指南
date: 2021-12-24 14:22:00
updated: 2023-11-21 10:37:29
tags: []
categories: 程序人生
---
高性能计算实验室提供了一台配置了六块`NVDIA Tesla T4`计算卡的GPU服务器，然而根据学校的相关管理规定，这台服务器并不能访问互联网，具体的说，核心交换机会将所有`192.168.102.12`发出的`TCP[SYN]`数据包全部丢弃。这可怎么办？实验室的同学们急坏了，一边骂着“にま的”，一边在寻找着突破封锁的方法。

<!--more-->

然而，广大劳动人们的智慧是无穷无尽的。经过我的一番思考，我用反向代理+VPN实现了上网功能，满足了劳动人民的需求，获得了实验室同学们的好评。下面我来介绍这种方法。
首先从TCP数据包的封锁突破。既然服务器无法主动发出对外的连接，那么只要一台客户端主机主动发起并保持对服务器的连接，服务器就能访问到客户端。就此我想到了著名的反向代理工具`frp`可以实现类似的效果。
我先用日本筑波大学的开源软件`Softether VPN`搭建好了VPN服务器，将`5555`端口作为接受连接的端口。网上教程一抓一大把，再次不再赘述。然后在本地配置`frp`的客户端，服务器上配置`frp`的服务端，将`5555`端口进行穿透。这样，服务器的`5555`端口实际上已经可以被连接了。
最后用`ftp`将vpn客户端传输到虚拟机上，创建虚拟网卡，新建连接，输入`192.168.102.12`，端口`5555`，熟练的打开Chrome，Oh~可以上网了！
## 最后公布一些参数
### 快速添加
本仓库中的`yzu-gpu.vpn`为配置文件，导入客户端可一键连接。校外连接请使用`AliyunPub.vpn`。
### `frp`服务器配置文件
```
[common]
bind_port = 7000
token = 812ba835-4fac-4b08-9441-8b7dcc1bdcb8
dashboard_addr = 0.0.0.0
dashboard_port = 7500
# dashboard user and passwd for basic auth protect
dashboard_user = admin
dashboard_pwd = admin
```
### VPN服务器管理密码
下载`Softether VPN`管理工具，连接到服务器`192.168.102.12`，端口`5555`，密码
````
Yzulug@114514
````
### VPN密码
下载`Softether VPN`客户端（管理工具也会一同安装），连接到服务器`192.168.102.12`，端口`5555`，
账号：`gpu`
密码：`yzuserver`
### 关于获得的ip
连接VPN后自动获得的ip为我的寝室内网ip，由路由器的DHCP自动分配，为`10.10.1.0/24`。
路由器的ip地址为`10.10.1.254`，管理用户、密码为`admin:Asd123456@`，不推荐自行配置。
### 关于校外访问
服务同时穿透到阿里云服务器`101.132.42.234`，方法同上，只需更改ip地址。
